---
phase: 01-project-scaffolding
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - main.go
  - app.go
  - wails.json
  - go.mod
  - go.sum
  - internal/engine/.gitkeep
  - internal/scenario/.gitkeep
  - internal/binding/engine_binding.go
autonomous: true

must_haves:
  truths:
    - "Wails 프로젝트가 초기화되어 wails dev 빌드가 가능하다"
    - "Go internal 패키지 구조가 존재한다 (engine, scenario, binding)"
    - "diago 의존성이 go.mod에 등록되어 있다"
    - "EngineBinding 구조체가 Wails Bind 배열에 등록되어 있다"
  artifacts:
    - path: "main.go"
      provides: "Wails 앱 엔트리포인트, embed.FS 에셋, Bind 배열"
      contains: "wails.Run"
    - path: "app.go"
      provides: "App 구조체, OnStartup/OnShutdown 라이프사이클, EngineBinding 초기화"
      contains: "OnStartup"
    - path: "internal/binding/engine_binding.go"
      provides: "EngineBinding 구조체, Ping/GetVersion 메서드"
      exports: ["NewEngineBinding", "Ping", "GetVersion"]
    - path: "go.mod"
      provides: "Go 모듈 정의, diago 의존성"
      contains: "emiago/diago"
  key_links:
    - from: "main.go"
      to: "app.go"
      via: "NewApp() 호출 및 Bind 배열에 engineBinding 등록"
      pattern: "app\\.engineBinding"
    - from: "app.go"
      to: "internal/binding/engine_binding.go"
      via: "binding.NewEngineBinding() 임포트 및 SetContext 호출"
      pattern: "binding\\.NewEngineBinding"
---

<objective>
Wails v2 프로젝트를 초기화하고 Go 백엔드 패키지 구조를 설정한다.

Purpose: 전체 프로젝트의 기반이 되는 디렉토리 구조, Go 모듈, Wails 설정을 확립한다. 이후 모든 계획이 이 구조 위에서 작업한다.
Output: wails dev로 빌드 가능한 프로젝트 스켈레톤, Go internal 패키지 구조, diago 의존성
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-project-scaffolding/01-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Wails v2 프로젝트 초기화</name>
  <files>main.go, app.go, wails.json, go.mod, frontend/package.json</files>
  <action>
프로젝트 루트(/home/overthinker/Project/sipflow)에서 Wails v2 프로젝트를 초기화한다.

주의: 현재 디렉토리에 이미 .planning/, .git/ 폴더가 있으므로, 빈 임시 디렉토리에서 `wails init -n sipflow -t react-ts`를 실행한 후 생성된 파일들을 프로젝트 루트로 복사하는 방식을 사용한다. 이미 존재하는 .git/과 .planning/은 절대 덮어쓰지 않는다.

1. 임시 디렉토리 생성: `mktemp -d`
2. `wails init -n sipflow -t react-ts -d <tmpdir>` 실행
3. 생성된 sipflow/ 하위의 모든 파일을 프로젝트 루트로 복사 (rsync --ignore-existing 또는 수동 복사, .git 제외)
4. 임시 디렉토리 삭제
5. `cd frontend && npm install` 실행
6. 프로젝트 루트에서 `wails doctor` 실행하여 환경 검증

안티패턴: .planning/ 디렉토리를 삭제하거나 덮어쓰지 말 것. wailsjs/ 수동 편집 금지.
  </action>
  <verify>
- `ls main.go app.go wails.json go.mod frontend/package.json` 모두 존재
- `wails doctor` 오류 없이 완료
- `cat go.mod`에 wails v2 의존성 확인
  </verify>
  <done>Wails 프로젝트 파일이 프로젝트 루트에 존재하고, frontend npm 의존성이 설치됨</done>
</task>

<task type="auto">
  <name>Task 2: Go 백엔드 패키지 구조 설정 및 diago 의존성 추가</name>
  <files>internal/engine/.gitkeep, internal/scenario/.gitkeep, internal/binding/engine_binding.go, app.go, main.go, go.mod</files>
  <action>
Go 내부 패키지 구조를 생성하고 바인딩 구조체를 설정한다.

1. 디렉토리 생성:
   - `mkdir -p internal/engine internal/scenario internal/binding`
   - internal/engine/.gitkeep, internal/scenario/.gitkeep 생성 (빈 패키지 유지용)

2. internal/binding/engine_binding.go 생성:
   - package binding
   - EngineBinding 구조체 (ctx context.Context 필드)
   - NewEngineBinding() 생성자
   - SetContext(ctx context.Context) 메서드
   - Ping() string 메서드 ("pong" 반환, runtime.LogInfo로 로그)
   - GetVersion() string 메서드 ("0.1.0" 반환)
   - 01-RESEARCH.md의 Pattern 2 (Multiple Binding Structs) 참조

3. app.go 수정:
   - "sipflow/internal/binding" 임포트 추가
   - App 구조체에 engineBinding *binding.EngineBinding 필드 추가
   - NewApp()에서 binding.NewEngineBinding() 초기화
   - OnStartup에서 a.engineBinding.SetContext(ctx) 호출

4. main.go 수정:
   - Bind 배열에 app.engineBinding 추가

5. diago 의존성 추가:
   - `go get github.com/emiago/diago`
   - `go mod tidy`

컨벤션: Go 패키지명 소문자 단수형. slog 아닌 runtime.LogInfo 사용 (Wails 컨텍스트 로깅). fmt.Errorf + %w 에러 래핑.
  </action>
  <verify>
- `ls internal/engine internal/scenario internal/binding/engine_binding.go` 모두 존재
- `go build ./...` 컴파일 성공
- `grep "emiago/diago" go.mod` diago 의존성 확인
- `grep "engineBinding" app.go` 바인딩 등록 확인
  </verify>
  <done>internal/ 패키지 3개 존재, EngineBinding이 Ping/GetVersion 메서드 노출, diago가 go.mod에 등록됨, go build 성공</done>
</task>

</tasks>

<verification>
1. `wails doctor` 환경 검증 통과
2. `go build ./...` 전체 Go 코드 컴파일 성공
3. `ls internal/engine internal/scenario internal/binding` 패키지 디렉토리 존재
4. `grep "emiago/diago" go.mod` diago 의존성 확인
5. `grep "Bind" main.go` engineBinding이 Bind 배열에 포함
</verification>

<success_criteria>
- wails doctor 통과
- go build ./... 성공
- internal/{engine,scenario,binding} 디렉토리 존재
- EngineBinding.Ping(), EngineBinding.GetVersion() 메서드 존재
- diago가 go.mod에 등록
- main.go Bind 배열에 engineBinding 등록
</success_criteria>

<output>
완료 후, `.planning/phases/01-project-scaffolding/01-01-SUMMARY.md` 생성
</output>
